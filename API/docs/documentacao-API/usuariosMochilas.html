<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API - Mochilas Usu√°rio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
            color: #333;
        }

        h1,
        h2,
        h3 {
            color: #222;
        }

        .section {
            margin-bottom: 40px;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        pre {
            background: #eee;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }

        a {
            color: #0056b3;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .back-link {
            display: inline-block;
            margin-top: 10px;
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <h1>üéí API - Mochilas Usu√°rio</h1>
    <p>Esta √© a documenta√ß√£o da API para a intera√ß√£o do usu√°rio com as mochilas. A maioria dos endpoints exige
        autentica√ß√£o de sess√£o do usu√°rio.</p>

    <div class="section" id="endpoints">
        <h2>üîó Endpoints</h2>
        <ul>
            <li><a href="index.html">Voltar ao Menu</a></li>
        </ul>
        <ul>
            <li><a href="#get-usuario">GET /mochilas/usuario</a> - Obter mochilas do usu√°rio</li>
            <li><a href="#post-vincular">POST /mochilas/vincular-mochila</a> - Vincular mochila a usu√°rio</li>
            <li><a href="#post-assumir-uso">POST /mochilas/assumir-uso</a> - Assumir uso de mochila</li>
            <li><a href="#post-encerrar-app">POST /mochilas/encerrar-uso-app</a> - Encerrar uso via app</li>
            <li><a href="#post-encerrar-iot">POST /mochilas/encerrar-uso-iot</a> - Encerrar uso via IOT</li>
        </ul>
    </div>

    <div class="section" id="get-usuario">
        <h2>üì• GET /mochilas/usuario</h2>
        <p>Obt√©m todas as mochilas vinculadas ao usu√°rio logado, com informa√ß√µes sobre o status de uso e per√≠odo.</p>
        <h3>Corpo da requisi√ß√£o:</h3>
        <p>N√£o h√° corpo de requisi√ß√£o.</p>
        <h3>Respostas:</h3>
        <ul>
            <li>`200 OK`: Retorna um array de objetos com as mochilas do usu√°rio.
                <pre>[
    {
        "MochilaCodigo": "codigo",
        "MochilaDescricao": "Mochila de teste",
        "MochilaPesoMax": 10.5,
        "MochilaNome": "Mochila de Viagem",
        "UsoStatus": "N√£o Usando",
        "DataFimUso": null,
        "DataInicioUso": null
    },
    ...
]</pre>
            </li>
            <li>`401 Unauthorized`: `{ "error": "Usu√°rio n√£o autenticado" }`</li>
            <li>`500 Internal Server Error`: `{ "error": "Erro ao obter mochilas" }`</li>
        </ul>
        <a href="#endpoints" class="back-link">‚¨Ö Voltar para Endpoints</a>
    </div>

    <div class="section" id="post-vincular">
        <h2>üîó POST /mochilas/vincular-mochila</h2>
        <p>Vincula uma mochila existente ao usu√°rio logado, usando o c√≥digo da mochila e um apelido para identifica√ß√£o.
        </p>
        <h3>Corpo da requisi√ß√£o:</h3>
        <pre>{
    "MochilaCodigo": "codigo",
    "MochilaNome": "Mochila do Trabalho"
}</pre>
        <h3>Respostas:</h3>
        <ul>
            <li>`200 OK`: `{ "ok": true, "message": "Mochila vinculada com sucesso" }`</li>
            <li>`400 Bad Request`: `{ "error": "C√≥digo da mochila √© obrigat√≥rio" }`</li>
            <li>`401 Unauthorized`: `{ "error": "Usu√°rio n√£o autenticado" }`</li>
            <li>`404 Not Found`: `{ "error": "Mochila n√£o encontrada" }`</li>
            <li>`409 Conflict`: `{ "error": "Usu√°rio j√° est√° vinculado a esta mochila" }`</li>
            <li>`500 Internal Server Error`: `{ "error": "Erro ao vincular mochila" }`</li>
        </ul>
        <a href="#endpoints" class="back-link">‚¨Ö Voltar para Endpoints</a>
    </div>

    <div class="section" id="post-assumir-uso">
        <h2>‚ñ∂Ô∏è POST /mochilas/assumir-uso</h2>
        <p>Permite que o usu√°rio logado assuma o uso de uma mochila, alterando seu status para "Usando".</p>
        <h3>Corpo da requisi√ß√£o:</h3>
        <pre>{
    "MochilaCodigo": "codigo"
}</pre>
        <h3>Respostas:</h3>
        <ul>
            <li>`200 OK`: `{ "ok": true, "message": "Mochila assumida com sucesso" }`</li>
            <li>`400 Bad Request`: `{ "error": "C√≥digo da mochila √© obrigat√≥rio" }`</li>
            <li>`401 Unauthorized`: `{ "error": "Usu√°rio n√£o autenticado" }`</li>
            <li>`404 Not Found`: `{ "error": "Mochila n√£o encontrada" }`</li>
            <li>`409 Conflict`: `{ "error": "J√° existe um usu√°rio usando esta mochila" }`</li>
            <li>`500 Internal Server Error`: `{ "error": "Erro ao assumir uso" }`</li>
        </ul>
        <a href="#endpoints" class="back-link">‚¨Ö Voltar para Endpoints</a>
    </div>

    <div class="section" id="post-encerrar-app">
        <h2>‚èπÔ∏è POST /mochilas/encerrar-uso-app</h2>
        <p>Encerra o uso de uma mochila que est√° em status "Usando" ou "√öltimo a Usar" para o usu√°rio logado.</p>
        <h3>Corpo da requisi√ß√£o:</h3>
        <pre>{
    "MochilaCodigo": "codigo"
}</pre>
        <h3>Respostas:</h3>
        <ul>
            <li>`200 OK`: `{ "ok": true, "message": "Uso encerrado com sucesso" }`</li>
            <li>`400 Bad Request`: `{ "error": "C√≥digo da mochila √© obrigat√≥rio" }`</li>
            <li>`401 Unauthorized`: `{ "error": "Usu√°rio n√£o autenticado" }`</li>
            <li>`404 Not Found`: `{ "error": "Mochila n√£o encontrada" }`</li>
            <li>`409 Conflict`: `{ "error": "Nenhum uso ativo encontrado para encerrar" }`</li>
            <li>`500 Internal Server Error`: `{ "error": "Erro ao encerrar uso" }`</li>
        </ul>
        <a href="#endpoints" class="back-link">‚¨Ö Voltar para Endpoints</a>
    </div>

    <div class="section" id="post-encerrar-iot">
        <h2>üîå POST /mochilas/encerrar-uso-iot</h2>
        <p>Encerra o uso de uma mochila atrav√©s da senha e c√≥digo, geralmente utilizado por dispositivos IoT.</p>
        <h3>Corpo da requisi√ß√£o:</h3>
        <pre>{
    "MochilaCodigo": "codigo",
    "MochilaSenha": "senha_da_mochila"
}</pre>
        <h3>Respostas:</h3>
        <ul>
            <li>`200 OK`: `{ "ok": true, "message": "Uso encerrado com sucesso" }`</li>
            <li>`400 Bad Request`: `{ "error": "C√≥digo da mochila √© obrigat√≥rio" }` ou `{ "error": "Senha da mochila √©
                obrigat√≥rio" }`</li>
            <li>`401 Unauthorized`: `{ "error": "Senha da mochila incorreta" }`</li>
            <li>`404 Not Found`: `{ "error": "Mochila n√£o encontrada" }`</li>
            <li>`409 Conflict`: `{ "error": "Nenhum uso ativo encontrado para encerrar" }`</li>
            <li>`500 Internal Server Error`: `{ "error": "Erro ao encerrar uso" }`</li>
        </ul>
        <a href="#endpoints" class="back-link">‚¨Ö Voltar para Endpoints</a>
    </div>
</body>

</html>